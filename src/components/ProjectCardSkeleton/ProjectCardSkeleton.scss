@use "../../styles/mixins.scss" as *;
@use "../../styles/variables.scss" as *;

// Shimmer animation keyframes
@keyframes shimmer {
    0% {
        background-position: -200px 0;
    }
    100% {
        background-position: calc(200px + 100%) 0;
    }
}

@keyframes pulse {
    0%,
    100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.skeleton-card {
    position: relative;
    height: 21.5rem;
    width: 100%;
    background-color: $tertiary;
    border-radius: 8px;
    overflow: hidden;
    animation: fadeIn 0.6s ease-out;
    cursor: default;

    &__overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2;
        background: transparent;
        transition: all 0.3s ease;

        &:hover {
            background-color: rgba($night, 0.1);
        }
    }

    &__view-icon {
        width: 40px;
        height: 40px;
        background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
        background-size: 200px 100%;
        border-radius: 50%;
        animation: shimmer 1.5s infinite;
        opacity: 0.7;
    }

    &__image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    &__image-placeholder {
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
        background-size: 200px 100%;
        animation: shimmer 1.5s infinite;
        position: relative;
        overflow: hidden;

        // Add some visual interest with subtle patterns
        &::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 60%, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
        }

        // Add a subtle border effect
        &::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border: 1px solid rgba(0, 0, 0, 0.05);
            border-radius: 8px;
        }
    }

    // Responsive adjustments
    @include tablet {
        border-radius: 6px;
    }

    @include desktop {
        border-radius: 8px;

        &:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
    }

    // Loading state variations
    &:nth-child(odd) {
        .skeleton-card__image-placeholder {
            animation-delay: 0.2s;
        }
    }

    &:nth-child(even) {
        .skeleton-card__image-placeholder {
            animation-delay: 0.4s;
        }
    }

    // Accessibility improvements
    @media (prefers-reduced-motion: reduce) {
        .skeleton-card__image-placeholder,
        .skeleton-card__view-icon {
            animation: pulse 2s infinite;
        }
    }
}

// Grid container adjustments for skeleton
.grid {
    .skeleton-card {
        margin: 0;
        border: 1px solid rgba(0, 0, 0, 0.05);
    }
}
